# Модуль реле WB-MR6C v.2

## Назначение
Шестиканальные модули реле WB-MR6C v.2 выпускаются для систем промышленной и домашней автоматизации и предназначены для прямого управления светодиодными, люминесцентными светильниками, лампами накаливания и другими нагрузками номиналом до 10 А (2 кВт). Также могут использоваться как модули ввода-вывода общего назначения.

Благодаря специальной конструкции реле, каждый канал может выдерживать длительный ток до 16 А и пусковые токи до 80 А. Обратите внимание, что из-за конструкции клеммников, суммарный номинальный коммутируемый ток на группу из трёх каналов 20 А. 
## Технические характеристики

##  Общий принцип работы
### Индикация
В модуле есть индикаторы, которые помогут определить его состояние без подключения к контроллеру:

* S — статус обмена по Modbus: загорается при подаче низковольтного питания на модуль и мигает в момент опроса по шине RS-485. В режиме загрузчика редко мигает. При загрузке новой прошивки перестает менять свое состояние.
* 1–6 — состояние выходов: горит — реле замкнуто.

### Входы
Входы реле выведены на разъёмные клеммники с номерами и общей клеммой iGND, работают по принципу «Сухой контакт».

=== "fw >=1.15.0"

К входам можно подключить выключатели для прямого управления выходами, или источник сигнала и посчитать количество импульсов, а также измерить его частоту. Максимальное значение измеряемой частоты сигнала зависит от ревизии устройства и от количества измеряемых сигналов. На испытании мы успешно измеряли шесть сигналов одновременно на частоте 2.5 кГц.

=== "fw <1.15.0"

К входам можно подключить выключатели для прямого управления выходами, или источник сигнала и посчитать количество импульсов.

Выключатели можно использовать с фиксацией и без неё. При использовании выключателей без фиксации доступно распознавание нескольких типов нажатий, на которые можно назначить свои действия — это полезно для создания сценарных выключателей. Также эти нажатия транслируются на контроллер по Modbus, где вы можете обрабатывать их программно. В ПО контроллера Wiren Board счётчики нажатий по умолчанию не опрашиваются, если они вам нужны — включите их опрос в настройках устройства.


По умолчанию каждый вход управляет выходом с таким же номером, а вход с номером «0» отключает все выходы.

=== "fw >=<1.12.0"

По умолчанию модуль настроен на выключатели с фиксацией — состояние контактов реле повторяют состояние контактов выключателя.

=== "fw <1.12.0"

По умолчанию модуль настроен на работу с выключателями без фиксации — каждое замыкание входа меняло состояние реле на противоположное.


Тип выключателей и настройки входов можно изменить в настройках.

###  Распознавание типов нажатий
Модуль может распознавать четыре типа нажатий: короткое, длинное, двойное, короткое, а затем длинное.

Обработку нажатий можно использовать на контроллере, куда по Modbus передаются специальные счётчики для каждого типа нажатий, или в самом устройстве для управления выходами.

Параметры распознавания нажатий можно изменять в настройках.

### Выходы
Внутри установлены 6 реле Hongfa HF32FV-16 с нормально открытыми контактами. Выходы объединены в две группы, каждая со своим общим проводом: COM1 и COM2. На выходы COM1 и COM2 можно подключить разные фазы. Допустимую мощность и тип коммутируемой нагрузки смотреть в статье Рекомендации по выбору реле.

С прошивки 1.18.4 можно настроить безопасное состояние каждого выхода выбрать поведение выходов при включении реле.


## Монтаж
{%
   include-markdown "../includes/mount-relay.md"
%}

## Настройка

## Подключение к контроллеру Wiren Board
### Выбор шаблона

Чтобы устройство появилось на вкладке Devices в веб-интерфейсе контроллера Wiren Board, добавьте новое serial-устройство и выберите один из шаблонов:
* в текущем релизе — WB-MR6C v.2, WB-MR6LV/x, WB-MR6HV/x,
* в старых версиях ПО — WB-MR6C.

### Управление устройством и просмотр значений

В веб-интерфейсе вы можете управлять выходами устройства и просматривать полученные с него значения. Список отображаемых каналов можно изменить через настройки устройства, доступные на странице выбора шаблона.

С помощью виртуальных выключателей K 1­ — K 6 можно управлять выходами модуля и следить за их состоянием. Если реле будет выключено или включено через внешний вход — это отразится в веб-интерфейсе.

Переключатели Input 1 ­— Input 6 показывают текущее состояние входов реле и недоступны для изменения.

Счетчики нажатий/включений отображаются в полях Input 1 counter­ — Input 6 counter. Значения счетчиков хранятся в оперативной памяти микроконтроллера реле и обнуляются при сбросе питания.

О восстановлении состояния реле после перебоя питания описано в разделе Режим работы реле при возобновлении питания. 

## Работа по Modbus

## Обновление прошивки
В устройствах Wiren Board можно обновлять прошивку по протоколу Modbus. Это даёт возможность расширять функциональные возможности устройств и устранять ошибки в прошивке на месте монтажа.

Начиная с версии прошивки 1.19.0 и при использовании загрузчика версии не ниже 1.2.х настройки хранящиеся в памяти модуля не пропадают при обновлении прошивки. При обновлении более ранних версий прошивки и использовании старых версий загрузчика настройки из памяти будут стерты. Чтобы не терять настройки — обновите загрузчик по инструкции Обновление загрузчика.

## Известные неисправности

## Ревизии

## Изображения и чертежи
