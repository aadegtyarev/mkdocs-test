В устройствах Wiren Board можно обновлять прошивку по протоколу Modbus. Это даёт позволяет расширять функциональные возможности устройств и устранять ошибки в прошивке на месте монтажа.

??? example "Обновление прошивки с контроллера Wiren Board"

    Чтобы обновить прошивку подключённого и настроенного в контроллере устройства, надо зайти на контроллер по SSH и выполнить одну из команд ниже.

    Обновить прошивки всех подключённых и настроенных на контроллере устройств:

    ```bash
    wb-mcu-fw-updater update-all
    ```

    Обновить прошивку определённого устройства:

    ```bash
    wb-mcu-fw-updater update-fw <порт, на котором находится устройство> -a <modbus адрес устройства>
    ```

    Обновить загрузчик. Загрузчик обновляется редко, а сама процедура обновления потенциально опасная. Поэтому не обновляйте загрузчик без особой нужды.

    ```bash
    wb-mcu-fw-updater update-bl <порт, на котором находится устройство> -a <modbus адрес устройства>
    ```

    Если во время прошивки что-то пойдёт не так, просто запустите процесс повторно и утилита восстановит устройство.

    Другие параметры утилиты обновления смотрите в документации [wb-mcu-fw-updater](../../soft/wb-mcu-fw-updater/index.md).

??? example "Обновление или восстановление прошивки с компьютера"

    Вам понадобится:
    - компьютер с ОС Windows или Linux;
    - утилита wb-mcu-fw-flasher, скачать: версии для [Windows](../../soft/wb-mcu-fw-flasher/files/wb-mcu-fw-flasher_1.0.3.zip) и [Linux](../../soft/wb-mcu-fw-flasher/files/wb-mcu-fw-flasher_1.0.3_amd64-all.deb);
    - адаптер USB-RS485;
    - сигнатура прошивки устройства, которая хранится в регистрах 290-301;
    - файл прошивки для нужной сигнатуры, который можно скачать в репозитории http://fw-releases.wirenboard.com/?prefix=fw/

    Записать прошивку из файла в устройство:

    === "Linux"

        ```bash
        wb-mcu-fw-flasher -j -d <порт, на котором находится устройство> -a <modbus адрес устройства> -f <путь к файлу прошивки>
        ```

    === "Windows"

        ```bash
        wb-mcu-fw-flasher_1.0.3.exe -j -d <порт, на котором находится устройство> -a <modbus адрес устройства> -f <путь к файлу прошивки>
        ```

    Восстановление прошивки, если устройство находится в бутлодере, то есть зелёный индикатор постоянно мигает раз в секунду:

    === "Linux"

        ```bash
        wb-mcu-fw-flasher -d <порт, на котором находится устройство> -a <modbus адрес устройства> -f <путь к файлу прошивки>
        ```

    === "Windows"

        ```bash
        wb-mcu-fw-flasher_1.0.3.exe -d <порт, на котором находится устройство> -a <modbus адрес устройства> -f <путь к файлу прошивки>
        ```

    Подробнее смотрите в документации [wb-mcu-fw-flasher](../../soft/wb-mcu-fw-flasher/index.md).
